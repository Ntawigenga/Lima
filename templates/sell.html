<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Lima</title>

    <!-- External CSS Links -->
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
        integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/css/bootstrap.css">
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/cart.css">
    <link rel="stylesheet" href="/static/css/nav.css">
    <link rel="stylesheet" href="/static/css/popup.css">


    <!-- JavaScript -->
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="/static/js/script.js" async></script>
    <script src="/static/js/cart.js"></script> <!-- Custom JS for cart and popup -->


    <style>
        /* Styling for buttons */
        .shop-item-button, #print, #buyBtn, #scrollbottom {
            background-color: green !important;
            color: white !important;
            border: none;
        }
    </style>
    
        


</head>

<body>
    <!-- ******NAVBAR******** -->
    <nav>
        <div class="nav-wrapper">
            <a href="/" class="brand-logo"> </a>
            <ul id="nav-mobile" class="right hide-on-med-and-down">
                <li><a href="/">Home</a></li>
                <li><a href="/crop-planning/">Crop Planning</a></li>
                <li><a href="/disease-detection/">Disease Detection</a></li>
                <li><a href="/sell/">Sell</a></li>
                <li><a href="/buy/">Buy</a></li>
            </ul>
        </div>
    </nav>

    <!-- ******BANNER******** -->
    <img class="logo" style="width: 90px; height:90px;" src="/static/assets/lima 6.png" alt="">
    <script>
        AOS.init();
    </script>

    <!-- Start Items Section -->
    <section class="cart">
        <div class="container">
            <div class="title">ITEMS</div>
            <button id="scrollbottom" class="btn btn-primary" type="button"
                onClick="document.getElementById('print').scrollIntoView();"><i class="fa fa-arrow-down"></i></button>
            <div class="row">
                <div class="col-xs-4 col-sm-6 col-md-6 col-lg-4 profile shop-item text-center">
                    <div data-aos="zoom-in">
                    <img class="shop-item-image img-responsive" src="/static/assets/item.jpg"onError="this.onerror=null;this.src='images/noimage.jpg';">
                    </div>
                    <h2><span class="shop-item-title">Tomato (2kg)</span></h2>
                    <div class="shop-item-details">
                        <h3><span class="shop-item-price">$ 1</span></h3>
                        <button class="btn btn-primary shop-item-button" type="button" data-item="Tomato (2kg) $1">SELL</button>
                    </div>
                </div>

                <div class="col-xs-4 col-sm-6 col-md-6 col-lg-4 profile shop-item text-center">
                    <div data-aos="zoom-in">
                    <img class="shop-item-image img-responsive" src="/static/assets/item1.jpg"onError="this.onerror=null;this.src='images/noimage.jpg';">
                    </div>
                    <h2><span class="shop-item-title">Spinach (8-Bunch)</span></h2>
                    <div class="shop-item-details">
                        <h3><span class="shop-item-price">$ 1</span></h3>
                        <button class="btn btn-primary shop-item-button" type="button" data-item="Spinach (8-Bunch) $1">SELL</button>
                    </div>
                </div>

                <div class="col-xs-4 col-sm-6 col-md-6 col-lg-4 profile shop-item text-center">
                    <div data-aos="zoom-in">
                    <img class="shop-item-image img-responsive" src="/static/assets/item2.jpg"onError="this.onerror=null;this.src='images/noimage.jpg';">
                    </div>
                    <h2><span class="shop-item-title">Brinjal (15)</span></h2>
                    <div class="shop-item-details">
                        <h3><span class="shop-item-price">$ 2</span></h3>
                        <button class="btn btn-primary shop-item-button" type="button" data-item="Brinjal (15) $2">SELL</button>
                    </div>
                </div>

                <div class="col-xs-4 col-sm-6 col-md-6 col-lg-4 profile shop-item text-center">
                    <div data-aos="zoom-in">
                    <img class="shop-item-image img-responsive" src="/static/assets/item8.jpeg"onError="this.onerror=null;this.src='images/noimage.jpg';">
                    </div>
                    <h2><span class="shop-item-title">Banana (5 kg)</span></h2>
                    <div class="shop-item-details">
                        <h3><span class="shop-item-price">$ 3</span></h3>
                        <button class="btn btn-primary shop-item-button" type="button" data-item="Banana (5 kg) $3">SELL</button>
                    </div>
                </div>

                <div class="col-xs-4 col-sm-6 col-md-6 col-lg-4 profile shop-item text-center">
                    <div data-aos="zoom-in">
                    <img class="shop-item-image img-responsive" src="/static/assets/item4.jpg"onError="this.onerror=null;this.src='images/noimage.jpg';">
                    </div>
                    <h2><span class="shop-item-title">Potato (8 kg)</span></h2>
                    <div class="shop-item-details">
                        <h3><span class="shop-item-price">$ 5</span></h3>
                        <button class="btn btn-primary shop-item-button" type="button" data-item="Potato (8 kg) $5">SELL</button>
                    </div>
                </div>

                <div class="col-xs-4 col-sm-6 col-md-6 col-lg-4 profile shop-item text-center">
                    <div data-aos="zoom-in">
                    <img class="shop-item-image img-responsive" src="/static/assets/item5.jpg"onError="this.onerror=null;this.src='images/noimage.jpg';">
                    </div>
                    <h2><span class="shop-item-title">Okra (5 kg)</span></h2>
                    <div class="shop-item-details">
                        <h3><span class="shop-item-price">$ 2</span></h3>
                        <button class="btn btn-primary shop-item-button" type="button" data-item="Okra (5 kg) $2">SELL</button>
                    </div>
                </div>

                <div class="col-xs-4 col-sm-6 col-md-6 col-lg-4 profile shop-item text-center">
                    <div data-aos="zoom-in">
                    <img class="shop-item-image img-responsive" src="/static/assets/item6.jpg"onError="this.onerror=null;this.src='images/noimage.jpg';">
                    </div>
                    <h2><span class="shop-item-title">Corn (6)</span></h2>
                    <div class="shop-item-details">
                        <h3><span class="shop-item-price">$ 2</span></h3>
                        <button class="btn btn-primary shop-item-button" type="button" data-item="Corn (6) $2">SELL</button>
                    </div>
                </div>

                <div class="col-xs-4 col-sm-6 col-md-6 col-lg-4 profile shop-item text-center">
                    <div data-aos="zoom-in">
                    <img class="shop-item-image img-responsive" src="/static/assets/item7.jpg"onError="this.onerror=null;this.src='images/noimage.jpg';">
                    </div>
                    <h2><span class="shop-item-title">Onion (5 kg)</span></h2>
                    <div class="shop-item-details">
                        <h3><span class="shop-item-price">$ 3</span></h3>
                        <button class="btn btn-primary shop-item-button" type="button" data-item="Onion (5 kg) $3">SELL</button>
                    </div>
                </div>

                <div class="col-xs-4 col-sm-6 col-md-6 col-lg-4 profile shop-item text-center">
                    <div data-aos="zoom-in">
                    <!-- Broken Image -->
                    <img class="shop-item-image img-responsive" src="/static/assets/item9.jpg"onError="this.onerror=null;this.src='images/noimage.jpg';">
                    </div>
                    <h2><span class="shop-item-title">Apple (1kg)</span></h2>
                    <div class="shop-item-details">
                        <h3><span class="shop-item-price">$ 3</span></h3>
                        <button class="btn btn-primary shop-item-button" type="button" data-item="Apple (1kg) $3">SELL</button>
                    </div>
                </div>


                <div class="col-xs-4 col-sm-6 col-md-6 col-lg-4 profile shop-item text-center">
                    <div data-aos="zoom-in">
                    <img class="shop-item-image img-responsive" src="/static/assets/item10.jpg"onError="this.onerror=null;this.src='images/noimage.jpg';">
                    </div>
                    <h2><span class="shop-item-title">Watermelon (4 Piece)</span></h2>
                    <div class="shop-item-details">
                        <h3><span class="shop-item-price">$ 4</span></h3>
                        <button class="btn btn-primary shop-item-button" type="button" data-item="Watermelon (4 Piece) $4">SELL</button>
                    </div>
                </div>

                <div class="col-xs-4 col-sm-6 col-md-6 col-lg-4 profile shop-item text-center">
                    <div data-aos="zoom-in">
                    <img class="shop-item-image img-responsive" src="/static/assets/item11.jpg"onError="this.onerror=null;this.src='images/noimage.jpg';">
                    </div>
                    <h2><span class="shop-item-title">Muskmelon (7kg)</span></h2>
                    <div class="shop-item-details">
                        <h3><span class="shop-item-price">$ 3</span></h3>
                        <button class="btn btn-primary shop-item-button" type="button" data-item="Muskmelon (7kg) $3">SELL</button>
                    </div>
                </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Cart Setup -->
    <div class="printallofthis">
        <section class="container content-section">
            <h2 class="section-header">CART</h2>
            <div class="cart-row">
                <span class="cart-item cart-header cart-column">ITEM</span>
                <span class="cart-price cart-header cart-column">PRICE</span>
                <span class="cart-quantity cart-header cart-column">QUANTITY</span>
            </div>
            <div class="cart-items">
            </div>
            <div class="cart-total">
                <strong class="cart-total-title">Total: </strong>
                <span class="cart-total-price">$ 0</span>
            </div>
        </section>

        <button id="print" class="btn btn-primary" type="button" onclick="window.print();">PRINT INVOICE</button>
        <button id="buyBtn" class="btn btn-primary btn-purchase" type="button" onclick="openEmailPopup();">Sell</button>
    </div>

    <!-- Background Overlay and Email Popup -->
    <div id="popupOverlay" onclick="closeEmailPopup()"></div>
    <div id="emailPopup">
        <div class="popup-content">
            <h2>Enter your email and confirm your order</h2>
            <form id="emailForm" action="https://formspree.io/f/mrgnronp" method="POST">
                <label for="email">Email Address:</label>
                <input type="email" id="email" name="email" required />
                <textarea id="orderDetails" name="orderDetails" style="display:none;"></textarea>
                <button type="submit">Confirm Purchase</button>
            </form>
            <button onclick="closeEmailPopup()">Cancel</button>
        </div>
    </div>

    <script>
        const buyButtons = document.querySelectorAll('.shop-item-button');
        const cartItems = [];
        let total = 0;

        buyButtons.forEach(button => {
            button.addEventListener('click', () => {
                const item = button.getAttribute('data-item');
                cartItems.push(item);
                total += parseFloat(item.split('$')[1]);
                updateCart();
            });
        });

        function updateCart() {
            const cartItemsContainer = document.querySelector('.cart-items');
            cartItemsContainer.innerHTML = cartItems.map(item => `<div>${item}</div>`).join('');
            document.querySelector('.cart-total-price').innerText = `$${total.toFixed(2)}`;
        }

        function openEmailPopup() {
            document.getElementById('popupOverlay').style.display = 'block';
            document.getElementById('emailPopup').style.display = 'block';
            document.getElementById('orderDetails').value = cartItems.join(', ');
        }

        function closeEmailPopup() {
            document.getElementById('popupOverlay').style.display = 'none';
            document.getElementById('emailPopup').style.display = 'none';
        }
    </script>
    <script src="/static/js/cart.js"></script>
</body>

</html>
